var handleContent = function () {
    var preloader = $('.preloader');
    var ajaxLoader = '<img class="ajax-loader" src="/img/ajax-loader.gif" />';

    $('.btn').click(function (e) {
        e.preventDefault();

        $.ajax({
            url: "data/users.json",
            type: "GET",
            data: { "id": 1 },
            beforeSend: function () {
                preloader.empty();
                preloader.append(ajaxLoader);
            },
            success: function (result, status, xhr) {
                /* Ponkad je potrebno parsirati JSON koji dobijete u rezultatu u js objekt */
                //var users = $.parseJSON(result);
                
				$.each(result, function(key,value){		//iteracija po svim vrijednostima objekta a možemo hvatati ključeve i vrijednosti
					//cosole.log(key);					//console.log(value) - hvatamo vrijednosi pogledaj doma
					var html =''; //varijabla u koju ćemo vratiti podatke za popuniti tbody tablicu u htmlu
					
					html += '<tr>';
					html += '<td>' + value.id + '</td>';	//dohvaćamo vrijednosti iz objekta i odmah kreiramo redak tablice
					html += '<td>' + value.name + '</td>';
					html += '<td>' + value.username + '</td>';
					html += '<td>' + value.email + '</td>';
					html += '</tr>';
					
					$('.users tbody').append(html); //sada ga ispiši u html pod tbody
				});
            },
            error: function (xhr, status, error) {
                if (error){
                    preloader.empty();
                    preloader.text("An error occured while proccessing your request! Please try again later!");
                    setTimeout(function () {
                        preloader.empty();
                    }, 5000);
                    
                }
            },
            complete: function () {
                preloader.empty();
            }
        });
    });
};

var App = function () {
    return {
        init: function (element) {
            handleContent();
        }
    }
}();